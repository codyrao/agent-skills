---
name: qa-case
description: 当用户需要根据 GitLab 代码变更生成测试用例时激活此技能。分析代码变更，识别影响的接口、页面、功能和流程，生成各端（前端、服务端、PC端、安卓端、iOS端）的功能测试用例、压测用例以及整体系统测试用例。
references:
  - references/frontend.md
  - references/server.md
  - references/pc.md
  - references/android.md
  - references/ios.md
  - references/system.md
---

# QA Case - 测试用例生成

## 角色定位

作为专业的测试工程师，负责根据代码变更生成全面的测试用例。

## 工作流程

### 1. 获取代码变更

通过 GitLab MCP 工具获取代码变更内容。

**验证规则：**
- 如果没有 GitLab MCP 工具，返回错误："错误：未找到 GitLab MCP 工具，生成失败"

### 2. 分析项目信息

根据变更的代码内容，使用分析 GitLab 仓库代码的 MCP 工具分析项目信息。

**验证规则：**
- 如果没有分析 GitLab 仓库代码的 MCP 工具，返回错误："错误：未找到分析 GitLab 仓库代码的 MCP 工具，生成失败"

### 3. 分析代码变更影响

根据变更的代码内容，结合项目信息，分析确认代码变动影响的接口、页面、功能和流程。

**分析维度：**
- **接口影响**：识别变更影响的 API 接口
- **页面影响**：识别变更影响的前端页面
- **功能影响**：识别变更影响的功能模块
- **流程影响**：识别变更影响的业务流程
- **端影响**：识别变更影响的端（前端、服务端、PC 端、安卓端、iOS 端）

### 4. 生成测试用例

根据代码变更影响，选择相应的 reference 文件生成测试用例：

#### 前端测试用例
使用 [references/frontend.md](references/frontend.md) 生成前端测试用例：
- 前端功能测试用例
- 前端性能测试用例
- 前端压测测试用例

#### 服务端测试用例
使用 [references/server.md](references/server.md) 生成服务端测试用例：
- 服务端功能测试用例
- 服务端性能测试用例
- 服务端压测测试用例

#### PC 端测试用例
使用 [references/pc.md](references/pc.md) 生成 PC 端测试用例：
- PC 端功能测试用例
- PC 端性能测试用例
- PC 端压测测试用例

#### 安卓端测试用例
使用 [references/android.md](references/android.md) 生成安卓端测试用例：
- 安卓端功能测试用例
- 安卓端性能测试用例
- 安卓端压测测试用例

#### iOS 端测试用例
使用 [references/ios.md](references/ios.md) 生成 iOS 端测试用例：
- iOS 端功能测试用例
- iOS 端性能测试用例
- iOS 端压测测试用例

#### 整体系统测试用例
使用 [references/system.md](references/system.md) 生成整体系统测试用例：
- 跨端功能测试用例
- 端到端流程测试用例
- 整体系统性能测试用例
- 整体系统压测测试用例

### 5. 发布或返回测试用例

#### 有 MR ID 的情况
如果用户有输入 GitLab 的 MR ID，就将测试用例内容评论到 MR 中。

**评论格式：**
```
(AI生成) 以下是这次合并的测试用例：
{测试用例列表}
```

#### 无 MR ID 的情况
直接向用户返回测试用例内容。

## 测试用例格式

### 功能测试用例格式
```
【用例编号】TC-XXX
【用例标题】[功能模块] 测试场景描述
【前置条件】执行测试前需要满足的条件
【测试步骤】
1. 步骤1
2. 步骤2
3. 步骤3
【预期结果】期望的测试结果
【优先级】高/中/低
```

### 压测测试用例格式
```
【用例编号】PT-XXX
【用例标题】[接口/功能] 压力测试
【测试场景】描述压测场景
【并发配置】并发用户数、持续时间
【性能指标】
- 响应时间：P99 < Xms
- 吞吐量：> X QPS
- 错误率：< X%
【通过标准】压测通过的标准
```

## 注意事项

1. **覆盖全面**：测试用例应覆盖所有变更的功能点
2. **场景完整**：包括正常场景、异常场景、边界场景
3. **可执行性**：测试用例应清晰可执行
4. **优先级合理**：根据功能重要性和风险设置优先级
5. **跨端一致**：多端功能应保持一致性测试
